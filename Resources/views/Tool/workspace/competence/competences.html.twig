{% extends "ClarolineCoreBundle:Workspace:layout.html.twig" %}
{% block title %}{{ 'competence_referencial' | trans({}, 'platform') | striptags | raw }}{% endblock %}
{% block breadcrumb %}
    {{
        macros.breadcrumbs([
            {
                'icon': 'icon-cog',
                'name': 'administration'|trans({}, 'platform'),
                'href': path('claro_admin_index')
            },
            {
                'name': 'competence_referencial'|trans({}, 'platform'),
                'href': 'claro_admin_competence'
            }
        ])
    }}
{% endblock %}
{% block content %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">{{ "competence_referencial" | trans({}, "platform" )}}</h3>
        </div>
        <div class="panel-body">
        <ul class="nav nav-tabs margin-bottom-md">
            <li class="active"><a href="{{ path('claro_workspace_competence_users', {'workspaceId': workspace.getId()}) }}"> {{'my_competences'|trans({}, 'platform') }} </a> </li>
            <li > <a href="{{ path('claro_workspace_competences_subscription_lists', {'workspaceId': workspace.getId() }) }}"> {{'subscription'|trans({}, 'platform') }} </a> </li>
            <li> <a href="{{ path('claro_workspace_competences', {'workspaceId': workspace.getId()} ) }}">{{ 'competence'|trans({}, 'competence') }}</a> </li>
            <li> <a href="{{path('claro_workspace_competences_list_users',{'workspaceId':workspace.getId()}) }}">
                {{ 'users'|trans({},'platform') }}
            </a> </li>
          </ul>
        	<div id="tree">
	        	<ul class="nav nav-pills nav-stacked">
				{% for c in cpt %}
				  <li class="roots">
				    <a href="{{path('claro_admin_competence_show_referential',{'competenceId':c.id})}}">
				     {{c.name}}
				    </a>
				  </li>
				{% endfor %}	
				</ul>
			</div>
        </div>
        <div class="panel-footer">
        	<a data-toggle="modal" href="#myModal" class="btn btn-primary">{{'add'|trans({},'platform')}}</a>
        </div>
    </div>
  
  <!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">{{'competence_add'|trans({},'competence')}} </h4>
        </div>
        <div class="modal-body">
	         <form action="{{ path('claro_admin_competence_add') }}" method="POST" {{ form_enctype(form) }} id="myForm" > 
	         	{{ form_widget(form) }}
                {{ form_rest(form) }}
                {{ form_errors(form) }}
        	</form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{{'close'|trans({},'platform')}} </button>
          <button type="button" id='save' class="btn btn-primary">{{'add'|trans({},'platform')}}</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

{% endblock %}
{% block javascripts %}
 {{ parent() }}
	<script type='text/javascript'src='{{ asset('bundles/clarolinecore/js/administration/competences.js') }}'></script>
{% endblock %}