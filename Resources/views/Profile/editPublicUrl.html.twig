{% extends "ClarolineCoreBundle::layout.html.twig" %}

{% block title %}{{ user.getLastName() ~ ' ' ~ user.getFirstName() | striptags | raw }}{% endblock %}

{% block content %}
    {{ macros.flashBox() }}
    <div class="panel panel-default panel-user">
        <div class="panel-heading relative">
            <a href="{{ path('claro_profile_view') }}" title="{{ 'back_to_profile'|trans({}, 'platform') }}" class="pull-right"><span class="icon-reply"></span> {{ 'back_to_profile'|trans({}, 'platform') }}</a>
            <h3 class="panel-title">
                {{ 'tune_your_public_profile_url'|trans({}, 'platform') }}
            </h3>
        </div>
        <form action="{{ path('claro_user_public_url_edit') }}" method="post" class="form-horizontal" role="form" id="public_profile_url" {{ form_enctype(form) }}>
            <div class="panel-body">
                <p>
                    Votre URL actuelle <strong><a href="{{ path('claro_public_profile_view', {'publicUrl': user.publicUrl}) }}">{{ path('claro_public_profile_view', {'publicUrl': user.publicUrl}) }}</a></strong>.
                </p>
                <p class="alert alert-warning">
                    La personnalisation de l'URL de votre profil public n'est possible qu'une seule fois.
                </p>

                <div class="form-group public_profile_url">
                    {{ form_errors(form.public_url) }}
                    <label class="col-md-3 control-label">{{ path('claro_profile_view') }}</label>
                    <div class="col-md-4">
                        {{ form_widget(form.public_url) }}
                        <small class="help-block">
                            Note : Votre URL personnalisée doit comprendre entre 5 et 30 lettres ou chiffres.
                            Ne pas utiliser d'espaces, de symboles ou de caractères spéciaux.
                        </small>
                    </div>
                </div>

                {{ form_rest(form) }}
            </div>
            <div class="panel-footer">
                <button type="submit" class="btn btn-primary">{{ 'tune'|trans({}, 'platform') }}</button>
                <a href="{{ path('claro_profile_view') }}" class="btn btn-default">
                    {{ 'cancel' | trans({}, 'platform') }}
                </a>
            </div>
        </form>
    </div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script type="text/javascript" src='{{ asset('bundles/clarolinecore/js/user/profile.js') }}'></script>
{% endblock %}
